# VIEWS Platform Technical Guide

Welcome to the VIEWS Platform! This guide is designed to help you set up your environment and train your first VIEWS models. 

## 1. Technical Requirements

Step 1: The VIEWS pipeline does not run on Windows machines, therefore, a Linux machine or Mac is required.

Step 2: Always, always be connected to the VPN, even when in the office. To set up the VPN please consult the [PRIO handbook](https://handbook.prio.org/)

Step 3: You need a set of certificates allowing direct Postgres access, which are generated by either Mihai or Jim. Once you have the certificates, create .postgres and .postgresql folders in your home directory and place the certificates in both.

The following steps are platform dependent, so only follow the ones applicable to your platform. 

**Linux**: 

Step 4: Depending on your Linux Distribution, you might need to install the build subsystem (e.g.build-essential in Debian/Ubuntu). You can test if you have these by opening a terminal and typing gcc. If it says "error: no input file" or similar you are good to go, if it says "command not found" you need to install it. 

Step 5: Make sure zsh is installed. You can test if you have zsh by opening a terminal and typing zsh. If it says "command not found" install it with e.g. `sudo apt install zsh` in Ubuntu.

**Mac**: 

Step 4: On a Mac, you will need the development tools (xcode-select â€“install).

Step 5: Make sure zsh is installed. Try zsh --version before installing it from Homebrew. 



## 2. Set up the Environment and Execute Pipeline Code

In theory, it is not necessary to set up a new environment manually for executing pipeline code as executing the run.sh file takes care of this automatically. However, it is also possible to set up your environment manually or to use an already existing environment. Each model/ensemble in views-models contains a run.sh and a main.py file. The run.sh file will set up a conda  environment, activate it  and start model training while the main.py file only starts model training and assumes that you are in an appropriate environment. For first time users, it is best to simply use the run.sh file as it automatically installs all dependencies and does not rely on the user to set up the right environment: 

Step 1: Git clone all VIEWS Platform components

Step 2: Run the following commands to make sure the viewser configs are set properly:
- `viewser config set xy`
- `viewser config set xy `
- `viewser config set AZURE_BLOB_STORAGE_ACCOUNT_KEY xy`
- `viewser config set MODEL_METADATA_DATABASE_HOSTNAME xy`


Step 3: Navigate to [views-models](https://github.com/views-platform/views-models) and select the model/ensemble you want to run. Make sure you have the rights to run the `run.sh` file in the respective model/ensemble directory: `chmod +x run.sh` (same command on Linux and Mac!)

Step 4: Run the run.sh file using appropriate flags. See the [views-models](https://github.com/views-platform/views-models) repository for detailed information on which flags to use and for further use cases e.g. how to build a new model. If you simply want to train and evaluate the model run `./run.sh -t -e` (same command on Linux and Mac!).

Congratulations, your model should be training now! 

## Additional Information

- The environment created above can be used at any later point in time e.g. for generating predictions. You can either run the `run.sh` file with the appropriate flags and it will simply activate the environment created above or you can activate the environment by yourself and execute the `main.py` file. 

- All Views Platform components can also be installed individually using the pip package manager e.g. `pip install views-pipeline-code`. Make sure to set up a conda environment with python version 3.11 as it is tested and works.
